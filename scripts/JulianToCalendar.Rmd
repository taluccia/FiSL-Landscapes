---
title: "Julian to month day year date"
author: "Anna Talucci"
date: '2022-09-28'
output: html_document
---

# Overview
Take Day of Burn julian day can convert to YYYY-MM-DD

Input data is from Earth Engine output

# Library
```{r}
library(tidyverse)
library(sf)
library(vroom)
```


# Data
## Shapefile

```{r}
pts = st_read("../data/burnPts/FislBurnPtsAllWgs.shp", "FislBurnPtsAllWgs")
```
```{r}
pts1 = pts %>%
  dplyr::select(ID1, geometry)
```
## DoB
# vector of data files

```{r}
f <- list.files(path = "../data/DayOfBurn/", pattern = "*.csv", full.names = TRUE)
allData = vroom::vroom(f)
```

```{r}
allData
```



# add Date as string
```{r}
( allData1 = allData %>% 
  mutate(yyyymmdd = as.Date(DoB, origin = as.Date(paste0(ID2,"-01-01")))) %>%
  dplyr::select(DoB:start, yyyymmdd) %>%
  mutate(Date = as.character(yyyymmdd)) %>%
  left_join(., pts1, by = join_by(ID1)) %>%
  rename(DOB_Ist = DoB) %>%
    st_as_sf() %>%
    dplyr::select(DOB_Ist:eco, Date, geometry)
)
```



# Get calendar date
with quotes and separated by comma to add to GEE code.

```{r}
cat(paste0(sprintf("'%s'", sort(unique(allData1$Date))), collapse = ", "))
```

# Save pt shp file
```{r}
st_write(allData1, "../outputs/DoBpts/FislDoBpts.shp", driver="ESRI Shapefile")
```